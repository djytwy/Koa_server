{"version":3,"sources":["webpack:///./src/store/mutations.js","webpack:///./src/store/types.js","webpack:///./src/store/actions.js","webpack:///./src/store/index.js","webpack:///./src/App.vue?2f6a","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/main.js","webpack:///./src/router/index.js"],"names":["mutations","state","data","token","window","sessionStorage","setItem","defineProperty_default","_mutations","removeItem","username","actions","UserLogin","_ref","commit","UserLoginout","_ref2","UserName","_ref3","Vue","use","Vuex","getItem","__webpack_exports__","Store","selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","config","productionTip","Button","Row","Input","Dialog","Form","FormItem","prototype","$ELEMENT","size","zIndex","$confirm","MessageBox","confirm","$http","axios","$message","Message","defaults","withCredentials","el","router","store","h","App","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__store_index_js__","Router","mode","routes","path","component","resolve","require","bind","catch","oe","meta","requireAuth","loginCheck","beforeEach","to","from","next","requiresAuth","query","redirect","fullPath"],"mappings":"4HAkBeA,GAhBTA,WCFe,QDGF,SAACC,EAAOC,GACnBD,EAAME,MAAQD,EACdE,OAAOC,eAAeC,QAAQ,QAASJ,KAHzCK,IAAAC,ECAgB,SDKF,SAACP,GACbA,EAAME,MAAQ,KACdC,OAAOC,eAAeI,WAAW,WAPnCF,IAAAC,ECEkB,WDOF,SAACP,EAAOC,GAEtBD,EAAMS,SAAWR,EACjBE,OAAOC,eAAeC,QAAQ,WAAYJ,KAZ5CM,GEGSG,GACXC,UADW,SAAAC,EACWX,IAClBY,EADuBD,EAAfC,QDNK,QCOOZ,IAExBa,aAJW,SAAAC,IAKPF,EADoBE,EAATF,QDPG,WCUlBG,SAPW,SAAAC,EAOUhB,IACjBY,EADsBI,EAAfJ,QDRS,WCSOZ,KCP/BiB,UAAIC,IAAIC,KAGR,IAAMpB,GACFE,MAAOC,OAAOC,eAAeiB,QAAQ,SACrCZ,SAAU,IAGCa,EAAA,MAAIF,IAAKG,OACpBvB,QACAD,YACAW,gHCdWc,GADEC,OAFP,WAAgB,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE7FI,oBCChC,IAuBeC,EAvBUC,EAAQ,OAcjCC,ECTAC,KAAA,ODWEb,GATF,EAVA,SAAAc,GACEH,EAAQ,SAaV,KAEA,MAUgC,6EEhBhCjB,UAAIqB,OAAOC,eAAgB,EAC3BtB,UAAIC,IAAIsB,UACRvB,UAAIC,IAAIuB,OACRxB,UAAIC,IAAIwB,SACRzB,UAAIC,IAAIyB,UACR1B,UAAIC,IAAI0B,QACR3B,UAAIC,IAAI2B,YAER5B,UAAI6B,UAAUC,UAAaC,KAAM,QAASC,OAAQ,KAClDhC,UAAI6B,UAAUI,SAAWC,aAAWC,QACpCnC,UAAI6B,UAAUO,MAAQC,IACtBrC,UAAI6B,UAAUS,SAAWC,UAEzBvC,UAAI6B,UAAUO,MAAQC,IACtBA,IAAMG,SAASC,iBAAgB,EAG/B,IAAIzC,WACF0C,GAAI,OACJC,WACAC,UACArC,OAAQ,SAAAsC,GAAA,OAAKA,EAAEC,8DC/BjB,IAAAC,EAAA9B,EAAA,QAAA+B,EAAA/B,EAAA,QAAAgC,EAAAhC,EAAA,QAIAjB,UAAIC,IAAIiD,KAGR,IAYMP,EAAS,IAAIO,KACjBC,KAAK,UACLC,SAEIC,KAAK,IACLlC,KAAK,OACLmC,UAlBO,SAAAC,GACXC,uBACED,EAAQC,EAAQ,UADlBC,KAAA,KAAAxC,IAAAyC,MAAAzC,EAAA0C,KAkBIC,MACEC,aAAa,KAIfR,KAAK,SACLlC,KAAK,QACLmC,UApBQ,SAAAC,GACZC,uBACED,EAAQC,EAAQ,UADlBC,KAAA,KAAAxC,IAAAyC,MAAAzC,EAAA0C,KAoBIC,MACEE,YAAY,OAQpBnB,EAAOoB,WAAW,SAACC,EAAIC,EAAMC,GAE3B,IAAIlF,EAAQ4D,IAAM9D,MAAME,MAErBgF,EAAGJ,KAAKO,aAENnF,EACDkF,IAEAA,GACEb,KAAM,SACNe,OAASC,SAAUL,EAAGM,YAIjBN,EAAGJ,KAAKE,YACd9E,EACDkF,GACEb,KAAK,IACLe,OAASC,SAAUL,EAAGM,YAM1BJ,MAIWvB","file":"static/js/app.08a02b79430b5efbf0b5.js","sourcesContent":["import * as types from './types.js'\r\n\r\nconst mutations = {\r\n    [types.LOGIN]: (state, data) => {\r\n        state.token = data;\r\n        window.sessionStorage.setItem('token', data);\r\n    },\r\n    [types.LOGOUT]: (state) => {\r\n        state.token = null;\r\n        window.sessionStorage.removeItem('token');\r\n    },\r\n    [types.USERNAME]: (state, data) => {\r\n        //把用户名存起来\r\n        state.username = data;\r\n        window.sessionStorage.setItem('username', data);\r\n    }\r\n};\r\n\r\nexport default mutations;\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export const LOGIN = 'LOGIN';\r\n\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\nexport const USERNAME = 'USERNAME';\n\n\n// WEBPACK FOOTER //\n// ./src/store/types.js","import * as types from './types.js'\r\n\r\n//actions常用于异步更改状态。也就是说它一般用来先发送请求，然后再commit\r\n//直接在页面发送请求后再store.commit()是完全可以的\r\n\r\nexport default {\r\n    UserLogin({ commit }, data){\r\n        commit(types.LOGIN, data);\r\n    },\r\n    UserLoginout({ commit }){\r\n        commit(types.LOGOUT);\r\n    },\r\n    UserName({ commit }, data){\r\n        commit(types.USERNAME, data);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nimport mutations from './mutations.js'\r\nimport actions from './actions.js'\r\n\r\nVue.use(Vuex);\r\n\r\n//初始化时用sessionStore.getItem('token'),这样子刷新页面就无需重新登录\r\nconst state = {\r\n    token: window.sessionStorage.getItem('token'),\r\n    username: ''\r\n};\r\n\r\nexport default new Vuex.Store({\r\n    state,\r\n    mutations,\r\n    actions\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-0e232033\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e232033\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e232033\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue';\r\nimport App from './App';\r\nimport router from './router';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nimport {Button,Row,Input,Dialog,MessageBox,Form,FormItem,Message} from 'element-ui';\r\nimport axios from 'axios';\r\nimport store from './store'\r\n\r\nVue.config.productionTip = false\r\nVue.use(Button);\r\nVue.use(Row);\r\nVue.use(Input);\r\nVue.use(Dialog);\r\nVue.use(Form);\r\nVue.use(FormItem);\r\n\r\nVue.prototype.$ELEMENT = { size: 'small', zIndex: 3000 };\r\nVue.prototype.$confirm = MessageBox.confirm;\r\nVue.prototype.$http = axios;\r\nVue.prototype.$message = Message;\r\n\r\nVue.prototype.$http = axios\r\naxios.defaults.withCredentials=true;\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport store from '../store/index.js'\r\n\r\nVue.use(Router)\r\n\r\n// 路由懒加载\r\nconst Home = resolve => {\r\n  require.ensure(['../components/home.vue'], () => {\r\n    resolve(require('../components/home.vue'))\r\n  })\r\n}\r\n\r\nconst Login = resolve => {\r\n  require.ensure(['../components/login.vue'], () => {\r\n    resolve(require('../components/login.vue'))\r\n  })\r\n}\r\n\r\nconst router = new Router({\r\n  mode:'history',\r\n  routes:[\r\n    {\r\n      path:'/',\r\n      name:'home',\r\n      component:Home,\r\n      meta:{ \r\n        requireAuth: true\r\n      }\r\n    },\r\n    {\r\n      path:'/login',\r\n      name:'login',\r\n      component:Login,\r\n      meta:{\r\n        loginCheck: true\r\n      }\r\n    }\r\n  ]\r\n})\r\n\r\n\r\n//注册全局钩子用来拦截导航\r\nrouter.beforeEach((to, from, next) => {\r\n  //获取store里面的token\r\n  let token = store.state.token;\r\n  //判断要去的路由有没有requiresAuth\r\n  if(to.meta.requiresAuth){\r\n\r\n    if(token){\r\n      next();\r\n    }else{\r\n      next({\r\n        path: '/login',\r\n        query: { redirect: to.fullPath }  // 将刚刚要去的路由path（却无权限）作为参数，方便登录成功后直接跳转到该路由\r\n      });\r\n    }\r\n\r\n  } else if (to.meta.loginCheck) {\r\n    if(token) {\r\n      next({\r\n        path:'/',\r\n        query: { redirect: to.fullPath }\r\n      })\r\n    } else {\r\n      next()\r\n    } \r\n  } else {\r\n    next();//如果无需token,那么随它去吧\r\n  }\r\n});\r\n\r\nexport default router;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js"],"sourceRoot":""}